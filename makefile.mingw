CC = gcc
CXXFLAGS = -Wall -O3 -ggdb -std=c++1y -fPIC -I. -I./win/
CFLAGS = -Wall -O3 -ggdb
LDFLAGS = -ldxguid -ldsound -lwinmm 
objects = ./jukebox/Sound/Sound.o ./jukebox/Sound/SoundImpl.o \
./jukebox/FileFormats/SoundFile.o ./jukebox/FileFormats/WaveFileImpl.o ./jukebox/FileFormats/VorbisFileImpl.o \
./jukebox/FileFormats/BufferedSoundFileImpl.o ./jukebox/FileFormats/FadedSoundFileImpl.o \
./jukebox/Mixer/Mixer.o ./jukebox/Sound/FadeOnStopSoundImpl.o \
./win/Sound/DirectSoundBuffer.o ./win/Mixer/WindowsMixer.o

all						:	./bin/libjukebox.dll test play
./bin/libjukebox.dll	:	$(objects)
	g++ -std=c++1y -ggdb -Wall $(objects) -shared $(LDFLAGS) -o ./bin/libjukebox.dll
test					:	./jukebox_test/demo/main.o
play					:	./jukebox_test/demo/play.o
	g++ -std=c++1y -ggdb -Wall ./jukebox_test/demo/play.cpp -I. -o ./bin/play.exe -L./bin -ljukebox
./jukebox_test/main.o							:	genheader
./jukebox_test/play.o							:	genheader
./jukebox/Sound/Sound.o							:	./jukebox/Sound/SoundImpl.h ./jukebox/Sound/Sound.h
./jukebox/Sound/SoundImpl.o						:	./jukebox/Sound/SoundImpl.h 
./jukebox/FileFormats/SoundFile.o				:	./jukebox/FileFormats/SoundFileImpl.h ./jukebox/FileFormats/SoundFile.h
./jukebox/FileFormats/BufferedSoundFileImpl.o	:	./jukebox/FileFormats/SoundFileImpl.h ./jukebox/FileFormats/BufferedSoundFileImpl.h
./jukebox/FileFormats/FadedSoundFileImpl.o		:	./jukebox/FileFormats/SoundFileImpl.h ./jukebox/FileFormats/FadedSoundFileImpl.h
./jukebox/FileFormats/WaveFileImpl.o			:	./jukebox/FileFormats/SoundFileImpl.h ./jukebox/FileFormats/SoundFile.h ./jukebox/FileFormats/WaveFileImpl.h ./jukebox/FileFormats/BufferedSoundFileImpl.h ./jukebox/FileFormats/FadedSoundFileImpl.h
./jukebox/FileFormats/VorbisFileImpl.o			:	./jukebox/FileFormats/SoundFileImpl.h ./jukebox/FileFormats/SoundFile.h ./jukebox/FileFormats/VorbisFileImpl.h ./jukebox/FileFormats/BufferedSoundFileImpl.h ./jukebox/FileFormats/FadedSoundFileImpl.h
./jukebox/Mixer/Mixer.o							:	./jukebox/Mixer/MixerImpl.h ./jukebox/Mixer/Mixer.h
./jukebox/Sound/FadeOnStopSoundImpl.o			:	./jukebox/Sound/FadeOnStopSoundImpl.h
./win/Sound/DirectSoundBuffer.o					:	./jukebox/Sound/Sound.h ./jukebox/Sound/SoundImpl.h ./jukebox/FileFormats/SoundFile.h ./win/Sound/DirectSoundBuffer.h
./win/Mixer/WindowsMixer.o						:	./win/Mixer/WindowsMixer.h

.PHONY		:	clean	genheader
genheader	:
	./genheader.sh
clean		:
	rm -rf $(objects) ./bin/libjukebox.dll ./jukebox_test/demo/main.o ./bin/test.exe ./bin/play.exe
